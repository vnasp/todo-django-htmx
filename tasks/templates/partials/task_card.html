<!-- prettier-ignore -->
<div
  class="card {% if column_type == 'pending' %}border-yellow-500{% elif column_type == 'completed' %}border-green-500{% else %}border-red-500{% endif %} "
  id="task-card-{{ task.id }}"
>
  <div class="space-y-2">
    <div class="flex flex-row items-start gap-4 justify-between w-full">
      {% if column_type != 'deleted' %}
      <div>
        <input
          type="checkbox"
          {% if task.completed %}checked{% endif %}
          hx-post="{% url 'api_toggle_task' task.id %}"
          hx-target="#tasks-container"
          hx-swap="outerHTML"
          hx-trigger="change"
          class="task-toggle w-4 h-4 cursor-pointer shrink-0"
        />
      </div>
      {% endif %}
      <div class="flex-1">
        <h3
          class="{% if task.completed %}line-through text-gray-500{% endif %}"
        >
          {{ task.title }}
        </h3>
      </div>
      <div class="flex gap-4 shrink-0">
        {% if column_type == 'pending' or column_type == 'completed' %}
        <button
          hx-get="{% url 'edit_task' task.id %}"
          hx-target="#task-card-{{ task.id }}"
          hx-swap="outerHTML"
          aria-label="Actualizar tarea"
          title="Actualizar"
          class="hover:text-primary"
        >
          <i data-lucide="edit-2" class="w-4 h-4"></i>
        </button>
        <button
          hx-delete="{% url 'api_delete_task' task.id %}"
          hx-target="#tasks-container"
          hx-swap="outerHTML"
          hx-confirm="Â¿Mover a eliminadas?"
          class="hover:text-red-600"
          aria-label="Eliminar tarea"
        >
          <i data-lucide="trash" class="w-4 h-4"></i>
        </button>
        {% endif %}
      </div>
    </div>

    <div class="text-sm">
      {{ task.description }}
    </div>

    <div class="text-xs text-gray-500 space-x-2 flex items-center gap-2">
      <span class="flex items-center gap-1"><i data-lucide="calendar" class="w-4 h-4"></i>{{ task.created_at|date:"d M Y H:i" }}</span>
      {% if task.updated_at|date:"U" != task.created_at|date:"U" %}
      <span class="flex items-center gap-1"><i data-lucide="history" class="w-4 h-4"></i>{{ task.updated_at|date:"d M Y H:i" }}</span>
      {% endif %}
    </div>
  </div>
</div>
